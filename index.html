<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∏–∫–∏—Ç–∞ –°–µ—Ä—á–µ–Ω–∫–æ ‚Äî –ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–µ–∫—Ç–æ–≤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <style>
        @keyframes pulse-slow { 0%, 100% { opacity: 0.3; } 50% { opacity: 0.8; } }
        .star { animation: pulse-slow 3s ease-in-out infinite; }
        .gradient-text { background: linear-gradient(to right, #c084fc, #f472b6, #2dd4bf); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { border-color: #a855f7; }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 100; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        html { scroll-behavior: smooth; }
        .photo-container { position: relative; overflow: hidden; }
        .photo-container img { transition: transform 0.3s ease; }
    </style>
</head>
<body class="min-h-screen bg-gray-900 text-white">
    <!-- Auth Button -->
    <div class="fixed top-4 right-4 z-50 flex gap-2">
        <button id="authBtn" onclick="handleAuth()" class="px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-full transition-all">
            –í–æ–π—Ç–∏
        </button>
    </div>

    <!-- Header -->
    <header class="relative min-h-screen flex items-center justify-center overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-br from-purple-900 via-blue-900 to-teal-900"></div>
        <div class="absolute inset-0" id="stars"></div>
        
        <div class="relative z-10 text-center px-4">
            <div class="mb-8 relative inline-block">
                <div class="w-40 h-40 rounded-full bg-gradient-to-r from-purple-500 to-teal-500 p-1 mx-auto">
                    <div class="w-full h-full rounded-full bg-gray-800 flex items-center justify-center overflow-hidden photo-container">
                        <img id="profilePhoto" src="" alt="–§–æ—Ç–æ" class="w-full h-full object-cover hidden">
                        <svg id="profilePlaceholder" class="w-20 h-20 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                    </div>
                </div>
                <button id="editPhotoBtn" onclick="openModal('photoModal')" class="hidden absolute bottom-0 right-0 bg-purple-600 p-2 rounded-full hover:bg-purple-500">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg>
                </button>
            </div>
            
            <h1 id="fullName" class="text-5xl font-bold mb-4 gradient-text">–°–µ—Ä—á–µ–Ω–∫–æ –ù–∏–∫–∏—Ç–∞ –°–µ—Ä–≥–µ–µ–≤–∏—á</h1>
            <p id="position" class="text-2xl text-gray-300 mb-6">–ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–µ–∫—Ç–æ–≤</p>
            
            <div class="flex flex-wrap justify-center gap-4 text-gray-300">
                <a id="phoneLink" href="tel:+79689402267" class="flex items-center gap-2 hover:text-purple-400 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                    <span id="phone">+7 (968) 940-22-67</span>
                </a>
                <a id="emailLink" href="mailto:nikitaserch@gmail.com" class="flex items-center gap-2 hover:text-purple-400 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                    <span id="email">nikitaserch@gmail.com</span>
                </a>
                <span class="flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    <span id="city">–ú–æ—Å–∫–≤–∞</span>
                </span>
            </div>
            
            <!-- Social Links -->
            <div id="socialLinks" class="mt-6 flex flex-wrap justify-center gap-3"></div>
            
            <button id="addSocialBtn" onclick="openModal('socialModal')" class="hidden mt-4 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-full transition-all text-sm">
                + –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ü—Å–µ—Ç—å
            </button>

            <button id="editHeaderBtn" onclick="openModal('headerModal')" class="hidden mt-4 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg transition-all">
                ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã
            </button>
        </div>
    </header>

    <!-- About -->
    <section class="py-20 px-4 bg-gradient-to-b from-gray-900 to-gray-800">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl font-bold mb-8 flex items-center gap-3">
                <div class="w-12 h-12 rounded-lg bg-gradient-to-r from-purple-600 to-pink-600 flex items-center justify-center">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                </div>
                –û–±–æ –º–Ω–µ
            </h2>
            <div class="bg-gray-800 bg-opacity-50 rounded-2xl p-6 backdrop-blur border border-gray-700">
                <p id="aboutText" class="text-gray-300 leading-relaxed">–ü–æ–ø—Ä–æ–±–æ–≤–∞–ª —Å–µ–±—è –≤ HR —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ —Ö–æ—á—É –¥–≤–∏–≥–∞—Ç—å—Å—è –Ω–∞–≤—Å—Ç—Ä–µ—á—É –Ω–æ–≤—ã–º –≤—ã–∑–æ–≤–∞–º.</p>
                <p class="text-gray-300 leading-relaxed mt-4">
                    <strong class="text-purple-400">–¶–µ–ª—å:</strong> <span id="goalText">–†–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –≤ –ø—Ä–æ–¥—É–∫—Ç–µ –∏ –ø—Ä–æ–µ–∫—Ç–∞—Ö.</span>
                </p>
                <button id="editAboutBtn" onclick="openModal('aboutModal')" class="hidden mt-4 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg transition-all">
                    ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                </button>
            </div>
        </div>
    </section>

    <!-- Experience -->
    <section class="py-20 px-4 bg-gray-800">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl font-bold mb-8 flex items-center gap-3">
                <div class="w-12 h-12 rounded-lg bg-gradient-to-r from-blue-600 to-teal-600 flex items-center justify-center">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                </div>
                –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã
            </h2>
            
            <button id="addExpBtn" onclick="openModal('expModal')" class="hidden mb-6 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg hover:opacity-90 transition-opacity">
                + –î–æ–±–∞–≤–∏—Ç—å –º–µ—Å—Ç–æ —Ä–∞–±–æ—Ç—ã
            </button>
            
            <div id="experienceList" class="space-y-6"></div>
        </div>
    </section>

    <!-- Skills -->
    <section class="py-20 px-4 bg-gray-900">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl font-bold mb-8 flex items-center gap-3">
                <div class="w-12 h-12 rounded-lg bg-gradient-to-r from-green-600 to-emerald-600 flex items-center justify-center">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path></svg>
                </div>
                –ù–∞–≤—ã–∫–∏
            </h2>
            <div id="skillsList" class="flex flex-wrap gap-3"></div>
            <button id="editSkillsBtn" onclick="openModal('skillsModal')" class="hidden mt-6 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg transition-all">
                ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≤—ã–∫–∏
            </button>
        </div>
    </section>

    <!-- Languages -->
    <section class="py-20 px-4 bg-gradient-to-b from-gray-900 to-gray-800">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl font-bold mb-8 flex items-center gap-3">
                <div class="w-12 h-12 rounded-lg bg-gradient-to-r from-indigo-600 to-violet-600 flex items-center justify-center">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"></path></svg>
                </div>
                –Ø–∑—ã–∫–∏
            </h2>
            <div id="languagesList" class="space-y-4"></div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-8 px-4 bg-gray-900 border-t border-gray-800">
        <div class="max-w-4xl mx-auto text-center text-gray-500">
            <p>¬© 2024 –ù–∏–∫–∏—Ç–∞ –°–µ—Ä—á–µ–Ω–∫–æ</p>
        </div>
    </footer>

    <!-- Photo Modal with Scale & Position -->
    <div id="photoModal" class="modal">
        <div class="bg-gray-800 rounded-2xl p-6 max-w-md w-full mx-4">
            <h3 class="text-xl font-bold mb-4">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–æ—Ç–æ</h3>
            <input type="text" id="photoUrlInput" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ URL —Ñ–æ—Ç–æ" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-4 text-white">
            
            <div class="mb-4">
                <label class="block text-gray-400 mb-2">–ú–∞—Å—à—Ç–∞–±: <span id="scaleValue">100</span>%</label>
                <input type="range" id="photoScale" min="100" max="200" value="100" class="w-full">
            </div>
            
            <div class="mb-4">
                <label class="block text-gray-400 mb-2">–ü–æ–∑–∏—Ü–∏—è –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏: <span id="posXValue">50</span>%</label>
                <input type="range" id="photoPosX" min="0" max="100" value="50" class="w-full">
            </div>
            
            <div class="mb-4">
                <label class="block text-gray-400 mb-2">–ü–æ–∑–∏—Ü–∏—è –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏: <span id="posYValue">50</span>%</label>
                <input type="range" id="photoPosY" min="0" max="100" value="50" class="w-full">
            </div>
            
            <div class="mb-4 p-4 bg-gray-700 rounded-lg">
                <p class="text-gray-400 text-sm mb-2">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä:</p>
                <div class="w-24 h-24 rounded-full overflow-hidden mx-auto bg-gray-600">
                    <img id="photoPreview" src="" class="w-full h-full object-cover">
                </div>
            </div>
            
            <div class="flex gap-2">
                <button onclick="savePhoto()" class="flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button onclick="closeModal('photoModal')" class="flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- Header Modal -->
    <div id="headerModal" class="modal">
        <div class="bg-gray-800 rounded-2xl p-6 max-w-md w-full mx-4">
            <h3 class="text-xl font-bold mb-4">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã</h3>
            <input type="text" id="inputName" placeholder="–ò–º—è" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-3 text-white">
            <input type="text" id="inputPosition" placeholder="–î–æ–ª–∂–Ω–æ—Å—Ç—å" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-3 text-white">
            <input type="text" id="inputPhone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-3 text-white">
            <input type="text" id="inputEmail" placeholder="Email" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-3 text-white">
            <input type="text" id="inputCity" placeholder="–ì–æ—Ä–æ–¥" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-4 text-white">
            <div class="flex gap-2">
                <button onclick="saveHeader()" class="flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button onclick="closeModal('headerModal')" class="flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- Social Links Modal -->
    <div id="socialModal" class="modal">
        <div class="bg-gray-800 rounded-2xl p-6 max-w-md w-full mx-4">
            <h3 class="text-xl font-bold mb-4">–î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ü—Å–µ—Ç—å</h3>
            <select id="socialType" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-3 text-white">
                <option value="telegram">Telegram</option>
                <option value="linkedin">LinkedIn</option>
                <option value="github">GitHub</option>
                <option value="vk">VK</option>
                <option value="instagram">Instagram</option>
                <option value="website">–°–∞–π—Ç</option>
            </select>
            <input type="text" id="socialName" placeholder="–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è (–Ω–∞–ø—Ä: @nyyquu)" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-3 text-white">
            <input type="text" id="socialUrl" placeholder="–°—Å—ã–ª–∫–∞ (–Ω–∞–ø—Ä: https://t.me/nyyquu)" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-4 text-white">
            <div class="flex gap-2">
                <button onclick="saveSocial()" class="flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg">–î–æ–±–∞–≤–∏—Ç—å</button>
                <button onclick="closeModal('socialModal')" class="flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div id="aboutModal" class="modal">
        <div class="bg-gray-800 rounded-2xl p-6 max-w-lg w-full mx-4">
            <h3 class="text-xl font-bold mb-4">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å "–û–±–æ –º–Ω–µ"</h3>
            <textarea id="inputAbout" rows="5" placeholder="–û —Å–µ–±–µ" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-3 text-white"></textarea>
            <input type="text" id="inputGoal" placeholder="–¶–µ–ª—å" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-4 text-white">
            <div class="flex gap-2">
                <button onclick="saveAbout()" class="flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button onclick="closeModal('aboutModal')" class="flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- Experience Modal -->
    <div id="expModal" class="modal">
        <div class="bg-gray-800 rounded-2xl p-6 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto">
            <h3 class="text-xl font-bold mb-4">–î–æ–±–∞–≤–∏—Ç—å –º–µ—Å—Ç–æ —Ä–∞–±–æ—Ç—ã</h3>
            <input type="text" id="inputCompany" placeholder="–ö–æ–º–ø–∞–Ω–∏—è" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-3 text-white">
            <input type="text" id="inputJobTitle" placeholder="–î–æ–ª–∂–Ω–æ—Å—Ç—å" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-3 text-white">
            <input type="text" id="inputPeriod" placeholder="–ü–µ—Ä–∏–æ–¥ (–Ω–∞–ø—Ä: –ú–∞—Ä—Ç 2024 ‚Äî –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è)" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-3 text-white">
            <textarea id="inputDuties" rows="4" placeholder="–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ (–∫–∞–∂–¥–∞—è —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-4 text-white"></textarea>
            <div class="flex gap-2">
                <button onclick="saveExperience()" class="flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button onclick="closeModal('expModal')" class="flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- Skills Modal -->
    <div id="skillsModal" class="modal">
        <div class="bg-gray-800 rounded-2xl p-6 max-w-lg w-full mx-4">
            <h3 class="text-xl font-bold mb-4">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≤—ã–∫–∏</h3>
            <textarea id="inputSkills" rows="5" placeholder="–ù–∞–≤—ã–∫–∏ (–∫–∞–∂–¥—ã–π —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-4 text-white"></textarea>
            <div class="flex gap-2">
                <button onclick="saveSkills()" class="flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button onclick="closeModal('skillsModal')" class="flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <script>
        // Social icons SVG
        const socialIcons = {
            telegram: '<svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>',
            linkedin: '<svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>',
            github: '<svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>',
            vk: '<svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M15.684 0H8.316C1.592 0 0 1.592 0 8.316v7.368C0 22.408 1.592 24 8.316 24h7.368C22.408 24 24 22.408 24 15.684V8.316C24 1.592 22.408 0 15.684 0zm3.692 17.123h-1.744c-.66 0-.864-.525-2.05-1.727-1.033-1-1.49-1.135-1.744-1.135-.356 0-.458.102-.458.593v1.575c0 .424-.135.678-1.253.678-1.846 0-3.896-1.118-5.335-3.202C4.624 10.857 4.03 8.57 4.03 8.096c0-.254.102-.491.593-.491h1.744c.44 0 .61.203.78.677.863 2.49 2.303 4.675 2.896 4.675.22 0 .322-.102.322-.66V9.721c-.068-1.186-.695-1.287-.695-1.71 0-.204.17-.407.44-.407h2.744c.373 0 .508.203.508.643v3.473c0 .372.17.508.271.508.22 0 .407-.136.813-.542 1.254-1.406 2.151-3.574 2.151-3.574.119-.254.322-.491.763-.491h1.744c.525 0 .644.27.525.643-.22 1.017-2.354 4.031-2.354 4.031-.186.305-.254.44 0 .78.186.254.796.779 1.203 1.253.745.847 1.32 1.558 1.473 2.05.17.49-.085.744-.576.744z"/></svg>',
            instagram: '<svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.757-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"/></svg>',
            website: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"></path></svg>'
        };

        const socialColors = {
            telegram: 'bg-blue-500 hover:bg-blue-400',
            linkedin: 'bg-blue-700 hover:bg-blue-600',
            github: 'bg-gray-700 hover:bg-gray-600',
            vk: 'bg-blue-600 hover:bg-blue-500',
            instagram: 'bg-pink-600 hover:bg-pink-500',
            website: 'bg-purple-600 hover:bg-purple-500'
        };

        // Firebase Config
        const firebaseConfig = {
            apiKey: "AIzaSyAbUUPWEauathso2jHXHSd4ZLetJ4ETyvI",
            authDomain: "nikita-cv.firebaseapp.com",
            projectId: "nikita-cv",
            storageBucket: "nikita-cv.firebasestorage.app",
            messagingSenderId: "609224803937",
            appId: "1:609224803937:web:8855d5d84aa2e6395d8c20"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        const ADMIN_EMAIL = "misterlagelvip09@gmail.com";
        let isAdmin = false;
        let resumeData = null;

        // Default data
        const defaultData = {
            fullName: "–°–µ—Ä—á–µ–Ω–∫–æ –ù–∏–∫–∏—Ç–∞ –°–µ—Ä–≥–µ–µ–≤–∏—á",
            position: "–ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–µ–∫—Ç–æ–≤",
            phone: "+7 (968) 940-22-67",
            email: "nikitaserch@gmail.com",
            city: "–ú–æ—Å–∫–≤–∞",
            photoUrl: "",
            photoScale: 100,
            photoPosX: 50,
            photoPosY: 50,
            socialLinks: [
                { type: "telegram", name: "@nyyquu", url: "https://t.me/nyyquu" }
            ],
            about: "–ü–æ–ø—Ä–æ–±–æ–≤–∞–ª —Å–µ–±—è –≤ HR —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ —Ö–æ—á—É –¥–≤–∏–≥–∞—Ç—å—Å—è –Ω–∞–≤—Å—Ç—Ä–µ—á—É –Ω–æ–≤—ã–º –≤—ã–∑–æ–≤–∞–º. –ü—Ä–µ–∫—Ä–∞—Å–Ω–æ —Å–ø—Ä–∞–≤–ª—è—é—Å—å —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏, –±—ã—Å—Ç—Ä–æ –æ—Å–≤–∞–∏–≤–∞—é –Ω–æ–≤—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –° —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é –±–µ—Ä—É—Å—å –∑–∞ –ø—Ä–æ–µ–∫—Ç—ã –∏ –¥–æ–≤–æ–∂—É –¥–µ–ª–æ –¥–æ –∫–æ–Ω—Ü–∞.",
            goal: "–†–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –≤ –ø—Ä–æ–¥—É–∫—Ç–µ –∏ –ø—Ä–æ–µ–∫—Ç–∞—Ö, —Å–º–µ–Ω–∏—Ç—å –≤–µ–∫—Ç–æ—Ä –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.",
            skills: ["SWOT-–∞–Ω–∞–ª–∏–∑", "PESTEL-–∞–Ω–∞–ª–∏–∑", "–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è", "–ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π", "–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏", "–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ", "Jira", "Bitrix24", "MS Project", "Figma", "Canva"],
            languages: [
                { name: "–†—É—Å—Å–∫–∏–π", level: "–†–æ–¥–Ω–æ–π", percent: 100 },
                { name: "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π", level: "C1", percent: 85 },
                { name: "–ö–∏—Ç–∞–π—Å–∫–∏–π", level: "B1", percent: 50 }
            ],
            experience: [
                {
                    company: "–ú–¢–°",
                    position: "–†–µ–∫—Ä—É—Ç–µ—Ä",
                    period: "–ú–∞—Ä—Ç 2024 ‚Äî –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è",
                    duties: ["–ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –±—Ä–∏—Ñ–∏–Ω–≥–æ–≤ —Å –Ω–∞–Ω–∏–º–∞—é—â–∏–º–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏", "–°–æ—Ä—Å–∏–Ω–≥ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º Sales, Pre-Sale, Architect, BDM", "–†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –≤ Huntflow", "–í–µ–¥–µ–Ω–∏–µ –¥–æ 18 –≤–∞–∫–∞–Ω—Å–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ"]
                },
                {
                    company: "–†–≠–£ –∏–º. –ì.–í. –ü–ª–µ—Ö–∞–Ω–æ–≤–∞",
                    position: "–ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä –≤—ã–µ–∑–¥–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞",
                    period: "–î–µ–∫–∞–±—Ä—å 2023 ‚Äî –ò—é–ª—å 2024",
                    duties: ["–û–±—Ä–∞–±–æ—Ç–∫–∞ 300 –∞–Ω–∫–µ—Ç, 80+ —á–∞—Å–æ–≤ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π", "–õ–∏–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –∏–∑ 5 —á–µ–ª–æ–≤–µ–∫", "–†–∞–±–æ—Ç–∞ —Å –ø–∞—Ä—Ç–Ω—ë—Ä–∞–º–∏ –∏ —Å–ø–æ–Ω—Å–æ—Ä–∞–º–∏"]
                },
                {
                    company: "–†–≠–£ –∏–º. –ì.–í. –ü–ª–µ—Ö–∞–Ω–æ–≤–∞",
                    position: "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞—Ä—å–µ—Ä–Ω–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è",
                    period: "–î–µ–∫–∞–±—Ä—å 2021 ‚Äî –î–µ–∫–∞–±—Ä—å 2022",
                    duties: ["–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ª–µ–∫—Ü–∏–π –æ—Ç UNILEVER, –†–ñ–î, –Ø–Ω–¥–µ–∫—Å", "–õ–∏–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –∏–∑ 4 —á–µ–ª–æ–≤–µ–∫", "–ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–∞–±–æ—Ç—ã 150 –∞–∫—Ç–∏–≤–∏—Å—Ç–æ–≤"]
                }
            ]
        };

        // Generate stars
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 50; i++) {
            const star = document.createElement('div');
            star.className = 'absolute rounded-full bg-white star';
            star.style.width = (Math.random() * 4 + 1) + 'px';
            star.style.height = star.style.width;
            star.style.left = (Math.random() * 100) + '%';
            star.style.top = (Math.random() * 100) + '%';
            star.style.animationDelay = (Math.random() * 2) + 's';
            starsContainer.appendChild(star);
        }

        // Photo preview controls
        document.getElementById('photoUrlInput').addEventListener('input', updatePhotoPreview);
        document.getElementById('photoScale').addEventListener('input', function() {
            document.getElementById('scaleValue').textContent = this.value;
            updatePhotoPreview();
        });
        document.getElementById('photoPosX').addEventListener('input', function() {
            document.getElementById('posXValue').textContent = this.value;
            updatePhotoPreview();
        });
        document.getElementById('photoPosY').addEventListener('input', function() {
            document.getElementById('posYValue').textContent = this.value;
            updatePhotoPreview();
        });

        function updatePhotoPreview() {
            const url = document.getElementById('photoUrlInput').value;
            const scale = document.getElementById('photoScale').value;
            const posX = document.getElementById('photoPosX').value;
            const posY = document.getElementById('photoPosY').value;
            const preview = document.getElementById('photoPreview');
            
            if (url) {
                preview.src = url;
                preview.style.transform = `scale(${scale / 100})`;
                preview.style.objectPosition = `${posX}% ${posY}%`;
            }
        }

        // Auth
        function handleAuth() {
            if (auth.currentUser) {
                auth.signOut();
            } else {
                const provider = new firebase.auth.GoogleAuthProvider();
                auth.signInWithPopup(provider).catch(err => {
                    alert("–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: " + err.message);
                });
            }
        }

        auth.onAuthStateChanged(user => {
            const btn = document.getElementById('authBtn');
            if (user) {
                isAdmin = user.email === ADMIN_EMAIL;
                btn.textContent = isAdmin ? 'üëë –í—ã–π—Ç–∏' : '–í—ã–π—Ç–∏';
                toggleEditButtons(isAdmin);
            } else {
                isAdmin = false;
                btn.textContent = '–í–æ–π—Ç–∏';
                toggleEditButtons(false);
            }
        });

        function toggleEditButtons(show) {
            const btns = ['editPhotoBtn', 'editHeaderBtn', 'editAboutBtn', 'addExpBtn', 'editSkillsBtn', 'addSocialBtn'];
            btns.forEach(id => {
                const el = document.getElementById(id);
                if (el) el.classList.toggle('hidden', !show);
            });
            document.querySelectorAll('.delete-exp-btn, .delete-social-btn').forEach(btn => {
                btn.classList.toggle('hidden', !show);
            });
        }

        // Modal functions
        function openModal(id) {
            document.getElementById(id).classList.add('active');
            if (id === 'headerModal') {
                document.getElementById('inputName').value = resumeData.fullName;
                document.getElementById('inputPosition').value = resumeData.position;
                document.getElementById('inputPhone').value = resumeData.phone;
                document.getElementById('inputEmail').value = resumeData.email;
                document.getElementById('inputCity').value = resumeData.city;
            } else if (id === 'aboutModal') {
                document.getElementById('inputAbout').value = resumeData.about;
                document.getElementById('inputGoal').value = resumeData.goal;
            } else if (id === 'skillsModal') {
                document.getElementById('inputSkills').value = resumeData.skills.join('\n');
            } else if (id === 'photoModal') {
                document.getElementById('photoUrlInput').value = resumeData.photoUrl || '';
                document.getElementById('photoScale').value = resumeData.photoScale || 100;
                document.getElementById('photoPosX').value = resumeData.photoPosX || 50;
                document.getElementById('photoPosY').value = resumeData.photoPosY || 50;
                document.getElementById('scaleValue').textContent = resumeData.photoScale || 100;
                document.getElementById('posXValue').textContent = resumeData.photoPosX || 50;
                document.getElementById('posYValue').textContent = resumeData.photoPosY || 50;
                updatePhotoPreview();
            }
        }

        function closeModal(id) {
            document.getElementById(id).classList.remove('active');
        }

        // Save functions
        async function saveData() {
            await db.collection('resume').doc('main').set(resumeData);
        }

        async function savePhoto() {
            resumeData.photoUrl = document.getElementById('photoUrlInput').value;
            resumeData.photoScale = parseInt(document.getElementById('photoScale').value);
            resumeData.photoPosX = parseInt(document.getElementById('photoPosX').value);
            resumeData.photoPosY = parseInt(document.getElementById('photoPosY').value);
            await saveData();
            renderPage();
            closeModal('photoModal');
        }

        async function saveHeader() {
            resumeData.fullName = document.getElementById('inputName').value;
            resumeData.position = document.getElementById('inputPosition').value;
            resumeData.phone = document.getElementById('inputPhone').value;
            resumeData.email = document.getElementById('inputEmail').value;
            resumeData.city = document.getElementById('inputCity').value;
            await saveData();
            renderPage();
            closeModal('headerModal');
        }

        async function saveAbout() {
            resumeData.about = document.getElementById('inputAbout').value;
            resumeData.goal = document.getElementById('inputGoal').value;
            await saveData();
            renderPage();
            closeModal('aboutModal');
        }

        async function saveSocial() {
            const social = {
                type: document.getElementById('socialType').value,
                name: document.getElementById('socialName').value,
                url: document.getElementById('socialUrl').value
            };
            if (!resumeData.socialLinks) resumeData.socialLinks = [];
            resumeData.socialLinks.push(social);
            await saveData();
            renderPage();
            closeModal('socialModal');
            document.getElementById('socialName').value = '';
            document.getElementById('socialUrl').value = '';
        }

        async function deleteSocial(index) {
            if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É —Å–æ—Ü—Å–µ—Ç—å?')) {
                resumeData.socialLinks.splice(index, 1);
                await saveData();
                renderPage();
            }
        }

        async function saveExperience() {
            const exp = {
                company: document.getElementById('inputCompany').value,
                position: document.getElementById('inputJobTitle').value,
                period: document.getElementById('inputPeriod').value,
                duties: document.getElementById('inputDuties').value.split('\n').filter(d => d.trim())
            };
            resumeData.experience.unshift(exp);
            await saveData();
            renderPage();
            closeModal('expModal');
            document.getElementById('inputCompany').value = '';
            document.getElementById('inputJobTitle').value = '';
            document.getElementById('inputPeriod').value = '';
            document.getElementById('inputDuties').value = '';
        }

        async function deleteExperience(index) {
            if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ –º–µ—Å—Ç–æ —Ä–∞–±–æ—Ç—ã?')) {
                resumeData.experience.splice(index, 1);
                await saveData();
                renderPage();
            }
        }

        async function saveSkills() {
            resumeData.skills = document.getElementById('inputSkills').value.split('\n').filter(s => s.trim());
            await saveData();
            renderPage();
            closeModal('skillsModal');
        }

        // Render
        function renderPage() {
            document.getElementById('fullName').textContent = resumeData.fullName;
            document.getElementById('position').textContent = resumeData.position;
            document.getElementById('phone').textContent = resumeData.phone;
            document.getElementById('phoneLink').href = 'tel:' + resumeData.phone.replace(/\D/g, '');
            document.getElementById('email').textContent = resumeData.email;
            document.getElementById('emailLink').href = 'mailto:' + resumeData.email;
            document.getElementById('city').textContent = resumeData.city;
            document.getElementById('aboutText').textContent = resumeData.about;
            document.getElementById('goalText').textContent = resumeData.goal;

            // Photo with scale and position
            const photo = document.getElementById('profilePhoto');
            const placeholder = document.getElementById('profilePlaceholder');
            if (resumeData.photoUrl) {
                photo.src = resumeData.photoUrl;
                photo.style.transform = `scale(${(resumeData.photoScale || 100) / 100})`;
                photo.style.objectPosition = `${resumeData.photoPosX || 50}% ${resumeData.photoPosY || 50}%`;
                photo.classList.remove('hidden');
                placeholder.classList.add('hidden');
            } else {
                photo.classList.add('hidden');
                placeholder.classList.remove('hidden');
            }

            // Social Links
            const socialContainer = document.getElementById('socialLinks');
            const links = resumeData.socialLinks || [];
            socialContainer.innerHTML = links.map((s, i) => `
                <a href="${s.url}" target="_blank" class="flex items-center gap-2 px-4 py-2 ${socialColors[s.type] || 'bg-purple-600 hover:bg-purple-500'} bg-opacity-80 rounded-full text-sm transition-all">
                    ${socialIcons[s.type] || ''}
                    ${s.name}
                </a>
                ${isAdmin ? `<button onclick="deleteSocial(${i})" class="delete-social-btn text-red-400 hover:text-red-300 -ml-2">‚úï</button>` : ''}
            `).join('');

            // Experience
            const expList = document.getElementById('experienceList');
            expList.innerHTML = resumeData.experience.map((exp, i) => `
                <div class="relative bg-gray-900 bg-opacity-50 rounded-2xl p-6 border border-gray-700 card-hover">
                    <div class="flex items-start justify-between flex-wrap gap-2">
                        <div>
                            <h3 class="text-xl font-semibold text-white">${exp.position}</h3>
                            <p class="text-teal-400 mt-1">${exp.company}</p>
                        </div>
                        <span class="text-gray-400 text-sm">${exp.period}</span>
                    </div>
                    <ul class="mt-4 space-y-2 text-gray-300">
                        ${exp.duties.map(d => `<li class="flex items-start gap-2"><span class="text-purple-400">‚Ä¢</span>${d}</li>`).join('')}
                    </ul>
                    <button onclick="deleteExperience(${i})" class="delete-exp-btn hidden absolute top-4 right-4 text-red-400 hover:text-red-300">üóëÔ∏è</button>
                </div>
            `).join('');

            // Skills
            document.getElementById('skillsList').innerHTML = resumeData.skills.map(s => 
                `<span class="px-4 py-2 bg-gradient-to-r from-gray-800 to-gray-700 rounded-full border border-gray-600 hover:border-purple-500 transition-all">${s}</span>`
            ).join('');

            // Languages
            document.getElementById('languagesList').innerHTML = resumeData.languages.map(l => `
                <div class="bg-gray-800 bg-opacity-50 rounded-xl p-4 border border-gray-700">
                    <div class="flex justify-between mb-2">
                        <span class="font-semibold">${l.name}</span>
                        <span class="text-gray-400">${l.level}</span>
                    </div>
                    <div class="h-2 bg-gray-700 rounded-full overflow-hidden">
                        <div class="h-full bg-gradient-to-r from-purple-500 to-teal-500 rounded-full" style="width: ${l.percent}%"></div>
                    </div>
                </div>
            `).join('');

            toggleEditButtons(isAdmin);
        }

        // Load data
        async function loadData() {
            const doc = await db.collection('resume').doc('main').get();
            if (doc.exists) {
                resumeData = doc.data();
                // Merge with defaults for new fields
                if (!resumeData.socialLinks) resumeData.socialLinks = defaultData.socialLinks;
                if (!resumeData.photoScale) resumeData.photoScale = 100;
                if (!resumeData.photoPosX) resumeData.photoPosX = 50;
                if (!resumeData.photoPosY) resumeData.photoPosY = 50;
            } else {
                resumeData = defaultData;
                await db.collection('resume').doc('main').set(defaultData);
            }
            renderPage();
        }

        loadData();
    </script>
</body>
</html>
