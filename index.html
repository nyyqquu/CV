<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∏–∫–∏—Ç–∞ –°–µ—Ä—á–µ–Ω–∫–æ ‚Äî –ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–µ–∫—Ç–æ–≤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <style>
        @keyframes pulse-slow { 0%, 100% { opacity: 0.3; } 50% { opacity: 0.8; } }
        .star { animation: pulse-slow 3s ease-in-out infinite; }
        .gradient-text { background: linear-gradient(to right, #c084fc, #f472b6, #2dd4bf); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { border-color: #a855f7; }
        .editable:hover { outline: 2px dashed #a855f7; outline-offset: 2px; cursor: pointer; }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 100; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        html { scroll-behavior: smooth; }
    </style>
</head>
<body class="min-h-screen bg-gray-900 text-white">
    <!-- Auth Button -->
    <div class="fixed top-4 right-4 z-50 flex gap-2">
        <button id="authBtn" onclick="handleAuth()" class="px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-full transition-all">
            –í–æ–π—Ç–∏
        </button>
    </div>

    <!-- Header -->
    <header class="relative min-h-screen flex items-center justify-center overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-br from-purple-900 via-blue-900 to-teal-900"></div>
        <div class="absolute inset-0" id="stars"></div>
        
        <div class="relative z-10 text-center px-4">
            <div class="mb-8 relative inline-block">
                <div class="w-40 h-40 rounded-full bg-gradient-to-r from-purple-500 to-teal-500 p-1 mx-auto">
                    <div class="w-full h-full rounded-full bg-gray-800 flex items-center justify-center overflow-hidden">
                        <img id="profilePhoto" src="" alt="–§–æ—Ç–æ" class="w-full h-full object-cover hidden">
                        <svg id="profilePlaceholder" class="w-20 h-20 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                    </div>
                </div>
                <button id="editPhotoBtn" onclick="openModal('photoModal')" class="hidden absolute bottom-0 right-0 bg-purple-600 p-2 rounded-full hover:bg-purple-500">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg>
                </button>
            </div>
            
            <h1 id="fullName" class="text-5xl font-bold mb-4 gradient-text">–°–µ—Ä—á–µ–Ω–∫–æ –ù–∏–∫–∏—Ç–∞ –°–µ—Ä–≥–µ–µ–≤–∏—á</h1>
            <p id="position" class="text-2xl text-gray-300 mb-6">–ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–µ–∫—Ç–æ–≤</p>
            
            <div class="flex flex-wrap justify-center gap-4 text-gray-300">
                <a id="phoneLink" href="tel:+79689402267" class="flex items-center gap-2 hover:text-purple-400 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                    <span id="phone">+7 (968) 940-22-67</span>
                </a>
                <a id="emailLink" href="mailto:nikitaserch@gmail.com" class="flex items-center gap-2 hover:text-purple-400 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                    <span id="email">nikitaserch@gmail.com</span>
                </a>
                <span class="flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    <span id="city">–ú–æ—Å–∫–≤–∞</span>
                </span>
            </div>
            
            <div class="mt-6 flex justify-center gap-3">
                <a id="telegramLink" href="https://t.me/nyyquu" target="_blank" class="px-4 py-2 bg-purple-600 bg-opacity-50 rounded-full text-sm hover:bg-opacity-70 transition-all">
                    <span id="telegram">@nyyquu</span>
                </a>
                <span class="px-4 py-2 bg-teal-600 bg-opacity-50 rounded-full text-sm">Telegram / WhatsApp</span>
            </div>

            <button id="editHeaderBtn" onclick="openModal('headerModal')" class="hidden mt-6 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg transition-all">
                ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã
            </button>
        </div>
    </header>

    <!-- About -->
    <section class="py-20 px-4 bg-gradient-to-b from-gray-900 to-gray-800">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl font-bold mb-8 flex items-center gap-3">
                <div class="w-12 h-12 rounded-lg bg-gradient-to-r from-purple-600 to-pink-600 flex items-center justify-center">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                </div>
                –û–±–æ –º–Ω–µ
            </h2>
            <div class="bg-gray-800 bg-opacity-50 rounded-2xl p-6 backdrop-blur border border-gray-700">
                <p id="aboutText" class="text-gray-300 leading-relaxed">–ü–æ–ø—Ä–æ–±–æ–≤–∞–ª —Å–µ–±—è –≤ HR —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ —Ö–æ—á—É –¥–≤–∏–≥–∞—Ç—å—Å—è –Ω–∞–≤—Å—Ç—Ä–µ—á—É –Ω–æ–≤—ã–º –≤—ã–∑–æ–≤–∞–º. –ü—Ä–µ–∫—Ä–∞—Å–Ω–æ —Å–ø—Ä–∞–≤–ª—è—é—Å—å —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏, –±—ã—Å—Ç—Ä–æ –æ—Å–≤–∞–∏–≤–∞—é –Ω–æ–≤—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –° —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é –±–µ—Ä—É—Å—å –∑–∞ –ø—Ä–æ–µ–∫—Ç—ã –∏ –¥–æ–≤–æ–∂—É –¥–µ–ª–æ –¥–æ –∫–æ–Ω—Ü–∞.</p>
                <p class="text-gray-300 leading-relaxed mt-4">
                    <strong class="text-purple-400">–¶–µ–ª—å:</strong> <span id="goalText">–†–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –≤ –ø—Ä–æ–¥—É–∫—Ç–µ –∏ –ø—Ä–æ–µ–∫—Ç–∞—Ö, —Å–º–µ–Ω–∏—Ç—å –≤–µ–∫—Ç–æ—Ä –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.</span>
                </p>
                <button id="editAboutBtn" onclick="openModal('aboutModal')" class="hidden mt-4 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg transition-all">
                    ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                </button>
            </div>
        </div>
    </section>

    <!-- Experience -->
    <section class="py-20 px-4 bg-gray-800">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl font-bold mb-8 flex items-center gap-3">
                <div class="w-12 h-12 rounded-lg bg-gradient-to-r from-blue-600 to-teal-600 flex items-center justify-center">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                </div>
                –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã
            </h2>
            
            <button id="addExpBtn" onclick="openModal('expModal')" class="hidden mb-6 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg hover:opacity-90 transition-opacity">
                + –î–æ–±–∞–≤–∏—Ç—å –º–µ—Å—Ç–æ —Ä–∞–±–æ—Ç—ã
            </button>
            
            <div id="experienceList" class="space-y-6"></div>
        </div>
    </section>

    <!-- Skills -->
    <section class="py-20 px-4 bg-gray-900">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl font-bold mb-8 flex items-center gap-3">
                <div class="w-12 h-12 rounded-lg bg-gradient-to-r from-green-600 to-emerald-600 flex items-center justify-center">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path></svg>
                </div>
                –ù–∞–≤—ã–∫–∏
            </h2>
            <div id="skillsList" class="flex flex-wrap gap-3"></div>
            <button id="editSkillsBtn" onclick="openModal('skillsModal')" class="hidden mt-6 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg transition-all">
                ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≤—ã–∫–∏
            </button>
        </div>
    </section>

    <!-- Languages -->
    <section class="py-20 px-4 bg-gradient-to-b from-gray-900 to-gray-800">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl font-bold mb-8 flex items-center gap-3">
                <div class="w-12 h-12 rounded-lg bg-gradient-to-r from-indigo-600 to-violet-600 flex items-center justify-center">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"></path></svg>
                </div>
                –Ø–∑—ã–∫–∏
            </h2>
            <div id="languagesList" class="space-y-4"></div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-8 px-4 bg-gray-900 border-t border-gray-800">
        <div class="max-w-4xl mx-auto text-center text-gray-500">
            <p>¬© 2024 –ù–∏–∫–∏—Ç–∞ –°–µ—Ä—á–µ–Ω–∫–æ</p>
        </div>
    </footer>

    <!-- Modals -->
    <!-- Photo Modal -->
    <div id="photoModal" class="modal">
        <div class="bg-gray-800 rounded-2xl p-6 max-w-md w-full mx-4">
            <h3 class="text-xl font-bold mb-4">–ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ</h3>
            <input type="text" id="photoUrlInput" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ URL —Ñ–æ—Ç–æ" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-4 text-white">
            <p class="text-gray-400 text-sm mb-4">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –Ω–∞ imgur.com –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Ö–æ—Å—Ç–∏–Ω–≥ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É</p>
            <div class="flex gap-2">
                <button onclick="savePhoto()" class="flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button onclick="closeModal('photoModal')" class="flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- Header Modal -->
    <div id="headerModal" class="modal">
        <div class="bg-gray-800 rounded-2xl p-6 max-w-md w-full mx-4">
            <h3 class="text-xl font-bold mb-4">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã</h3>
            <input type="text" id="inputName" placeholder="–ò–º—è" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-3 text-white">
            <input type="text" id="inputPosition" placeholder="–î–æ–ª–∂–Ω–æ—Å—Ç—å" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-3 text-white">
            <input type="text" id="inputPhone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-3 text-white">
            <input type="text" id="inputEmail" placeholder="Email" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-3 text-white">
            <input type="text" id="inputCity" placeholder="–ì–æ—Ä–æ–¥" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-3 text-white">
            <input type="text" id="inputTelegram" placeholder="Telegram (@username)" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-4 text-white">
            <div class="flex gap-2">
                <button onclick="saveHeader()" class="flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button onclick="closeModal('headerModal')" class="flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div id="aboutModal" class="modal">
        <div class="bg-gray-800 rounded-2xl p-6 max-w-lg w-full mx-4">
            <h3 class="text-xl font-bold mb-4">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å "–û–±–æ –º–Ω–µ"</h3>
            <textarea id="inputAbout" rows="5" placeholder="–û —Å–µ–±–µ" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-3 text-white"></textarea>
            <input type="text" id="inputGoal" placeholder="–¶–µ–ª—å" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-4 text-white">
            <div class="flex gap-2">
                <button onclick="saveAbout()" class="flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button onclick="closeModal('aboutModal')" class="flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- Experience Modal -->
    <div id="expModal" class="modal">
        <div class="bg-gray-800 rounded-2xl p-6 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto">
            <h3 class="text-xl font-bold mb-4">–î–æ–±–∞–≤–∏—Ç—å –º–µ—Å—Ç–æ —Ä–∞–±–æ—Ç—ã</h3>
            <input type="text" id="inputCompany" placeholder="–ö–æ–º–ø–∞–Ω–∏—è" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-3 text-white">
            <input type="text" id="inputJobTitle" placeholder="–î–æ–ª–∂–Ω–æ—Å—Ç—å" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-3 text-white">
            <input type="text" id="inputPeriod" placeholder="–ü–µ—Ä–∏–æ–¥ (–Ω–∞–ø—Ä: –ú–∞—Ä—Ç 2024 ‚Äî –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è)" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-3 text-white">
            <textarea id="inputDuties" rows="4" placeholder="–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ (–∫–∞–∂–¥–∞—è —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-4 text-white"></textarea>
            <div class="flex gap-2">
                <button onclick="saveExperience()" class="flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button onclick="closeModal('expModal')" class="flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- Skills Modal -->
    <div id="skillsModal" class="modal">
        <div class="bg-gray-800 rounded-2xl p-6 max-w-lg w-full mx-4">
            <h3 class="text-xl font-bold mb-4">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≤—ã–∫–∏</h3>
            <textarea id="inputSkills" rows="5" placeholder="–ù–∞–≤—ã–∫–∏ (–∫–∞–∂–¥—ã–π —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)" class="w-full px-4 py-2 bg-gray-700 rounded-lg mb-4 text-white"></textarea>
            <div class="flex gap-2">
                <button onclick="saveSkills()" class="flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button onclick="closeModal('skillsModal')" class="flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <script>
        // Firebase Config
        const firebaseConfig = {
            apiKey: "AIzaSyAbUUPWEauathso2jHXHSd4ZLetJ4ETyvI",
            authDomain: "nikita-cv.firebaseapp.com",
            projectId: "nikita-cv",
            storageBucket: "nikita-cv.firebasestorage.app",
            messagingSenderId: "609224803937",
            appId: "1:609224803937:web:8855d5d84aa2e6395d8c20"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        const ADMIN_EMAIL = "misterlagelvip09@gmail.com";
        let isAdmin = false;
        let resumeData = null;

        // Default data
        const defaultData = {
            fullName: "–°–µ—Ä—á–µ–Ω–∫–æ –ù–∏–∫–∏—Ç–∞ –°–µ—Ä–≥–µ–µ–≤–∏—á",
            position: "–ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–µ–∫—Ç–æ–≤",
            phone: "+7 (968) 940-22-67",
            email: "nikitaserch@gmail.com",
            city: "–ú–æ—Å–∫–≤–∞",
            telegram: "@nyyquu",
            photoUrl: "",
            about: "–ü–æ–ø—Ä–æ–±–æ–≤–∞–ª —Å–µ–±—è –≤ HR —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ —Ö–æ—á—É –¥–≤–∏–≥–∞—Ç—å—Å—è –Ω–∞–≤—Å—Ç—Ä–µ—á—É –Ω–æ–≤—ã–º –≤—ã–∑–æ–≤–∞–º. –ü—Ä–µ–∫—Ä–∞—Å–Ω–æ —Å–ø—Ä–∞–≤–ª—è—é—Å—å —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏, –±—ã—Å—Ç—Ä–æ –æ—Å–≤–∞–∏–≤–∞—é –Ω–æ–≤—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –° —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é –±–µ—Ä—É—Å—å –∑–∞ –ø—Ä–æ–µ–∫—Ç—ã –∏ –¥–æ–≤–æ–∂—É –¥–µ–ª–æ –¥–æ –∫–æ–Ω—Ü–∞.",
            goal: "–†–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –≤ –ø—Ä–æ–¥—É–∫—Ç–µ –∏ –ø—Ä–æ–µ–∫—Ç–∞—Ö, —Å–º–µ–Ω–∏—Ç—å –≤–µ–∫—Ç–æ—Ä –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.",
            skills: ["SWOT-–∞–Ω–∞–ª–∏–∑", "PESTEL-–∞–Ω–∞–ª–∏–∑", "–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è", "–ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π", "–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏", "–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ", "Jira", "Bitrix24", "MS Project", "Figma", "Canva"],
            languages: [
                { name: "–†—É—Å—Å–∫–∏–π", level: "–†–æ–¥–Ω–æ–π", percent: 100 },
                { name: "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π", level: "C1", percent: 85 },
                { name: "–ö–∏—Ç–∞–π—Å–∫–∏–π", level: "B1", percent: 50 }
            ],
            experience: [
                {
                    company: "–ú–¢–°",
                    position: "–†–µ–∫—Ä—É—Ç–µ—Ä",
                    period: "–ú–∞—Ä—Ç 2024 ‚Äî –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è",
                    duties: ["–ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –±—Ä–∏—Ñ–∏–Ω–≥–æ–≤ —Å –Ω–∞–Ω–∏–º–∞—é—â–∏–º–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏", "–°–æ—Ä—Å–∏–Ω–≥ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º Sales, Pre-Sale, Architect, BDM", "–†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –≤ Huntflow", "–í–µ–¥–µ–Ω–∏–µ –¥–æ 18 –≤–∞–∫–∞–Ω—Å–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ"]
                },
                {
                    company: "–†–≠–£ –∏–º. –ì.–í. –ü–ª–µ—Ö–∞–Ω–æ–≤–∞",
                    position: "–ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä –≤—ã–µ–∑–¥–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞",
                    period: "–î–µ–∫–∞–±—Ä—å 2023 ‚Äî –ò—é–ª—å 2024",
                    duties: ["–û–±—Ä–∞–±–æ—Ç–∫–∞ 300 –∞–Ω–∫–µ—Ç, 80+ —á–∞—Å–æ–≤ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π", "–õ–∏–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –∏–∑ 5 —á–µ–ª–æ–≤–µ–∫", "–†–∞–±–æ—Ç–∞ —Å –ø–∞—Ä—Ç–Ω—ë—Ä–∞–º–∏ –∏ —Å–ø–æ–Ω—Å–æ—Ä–∞–º–∏"]
                },
                {
                    company: "–†–≠–£ –∏–º. –ì.–í. –ü–ª–µ—Ö–∞–Ω–æ–≤–∞",
                    position: "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞—Ä—å–µ—Ä–Ω–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è",
                    period: "–î–µ–∫–∞–±—Ä—å 2021 ‚Äî –î–µ–∫–∞–±—Ä—å 2022",
                    duties: ["–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ª–µ–∫—Ü–∏–π –æ—Ç UNILEVER, –†–ñ–î, –Ø–Ω–¥–µ–∫—Å", "–õ–∏–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –∏–∑ 4 —á–µ–ª–æ–≤–µ–∫", "–ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–∞–±–æ—Ç—ã 150 –∞–∫—Ç–∏–≤–∏—Å—Ç–æ–≤"]
                }
            ]
        };

        // Generate stars
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 50; i++) {
            const star = document.createElement('div');
            star.className = 'absolute rounded-full bg-white star';
            star.style.width = (Math.random() * 4 + 1) + 'px';
            star.style.height = star.style.width;
            star.style.left = (Math.random() * 100) + '%';
            star.style.top = (Math.random() * 100) + '%';
            star.style.animationDelay = (Math.random() * 2) + 's';
            starsContainer.appendChild(star);
        }

        // Auth
        function handleAuth() {
            if (auth.currentUser) {
                auth.signOut();
            } else {
                const provider = new firebase.auth.GoogleAuthProvider();
                auth.signInWithPopup(provider).catch(err => {
                    alert("–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: " + err.message);
                });
            }
        }

        auth.onAuthStateChanged(user => {
            const btn = document.getElementById('authBtn');
            if (user) {
                isAdmin = user.email === ADMIN_EMAIL;
                btn.textContent = isAdmin ? 'üëë –í—ã–π—Ç–∏' : '–í—ã–π—Ç–∏';
                toggleEditButtons(isAdmin);
            } else {
                isAdmin = false;
                btn.textContent = '–í–æ–π—Ç–∏';
                toggleEditButtons(false);
            }
        });

        function toggleEditButtons(show) {
            const btns = ['editPhotoBtn', 'editHeaderBtn', 'editAboutBtn', 'addExpBtn', 'editSkillsBtn'];
            btns.forEach(id => {
                const el = document.getElementById(id);
                if (el) el.classList.toggle('hidden', !show);
            });
            document.querySelectorAll('.delete-exp-btn').forEach(btn => {
                btn.classList.toggle('hidden', !show);
            });
        }

        // Modal functions
        function openModal(id) {
            document.getElementById(id).classList.add('active');
            if (id === 'headerModal') {
                document.getElementById('inputName').value = resumeData.fullName;
                document.getElementById('inputPosition').value = resumeData.position;
                document.getElementById('inputPhone').value = resumeData.phone;
                document.getElementById('inputEmail').value = resumeData.email;
                document.getElementById('inputCity').value = resumeData.city;
                document.getElementById('inputTelegram').value = resumeData.telegram;
            } else if (id === 'aboutModal') {
                document.getElementById('inputAbout').value = resumeData.about;
                document.getElementById('inputGoal').value = resumeData.goal;
            } else if (id === 'skillsModal') {
                document.getElementById('inputSkills').value = resumeData.skills.join('\n');
            } else if (id === 'photoModal') {
                document.getElementById('photoUrlInput').value = resumeData.photoUrl || '';
            }
        }

        function closeModal(id) {
            document.getElementById(id).classList.remove('active');
        }

        // Save functions
        async function saveData() {
            await db.collection('resume').doc('main').set(resumeData);
        }

        async function savePhoto() {
            resumeData.photoUrl = document.getElementById('photoUrlInput').value;
            await saveData();
            renderPage();
            closeModal('photoModal');
        }

        async function saveHeader() {
            resumeData.fullName = document.getElementById('inputName').value;
            resumeData.position = document.getElementById('inputPosition').value;
            resumeData.phone = document.getElementById('inputPhone').value;
            resumeData.email = document.getElementById('inputEmail').value;
            resumeData.city = document.getElementById('inputCity').value;
            resumeData.telegram = document.getElementById('inputTelegram').value;
            await saveData();
            renderPage();
            closeModal('headerModal');
        }

        async function saveAbout() {
            resumeData.about = document.getElementById('inputAbout').value;
            resumeData.goal = document.getElementById('inputGoal').value;
            await saveData();
            renderPage();
            closeModal('aboutModal');
        }

        async function saveExperience() {
            const exp = {
                company: document.getElementById('inputCompany').value,
                position: document.getElementById('inputJobTitle').value,
                period: document.getElementById('inputPeriod').value,
                duties: document.getElementById('inputDuties').value.split('\n').filter(d => d.trim())
            };
            resumeData.experience.unshift(exp);
            await saveData();
            renderPage();
            closeModal('expModal');
            // Clear inputs
            document.getElementById('inputCompany').value = '';
            document.getElementById('inputJobTitle').value = '';
            document.getElementById('inputPeriod').value = '';
            document.getElementById('inputDuties').value = '';
        }

        async function deleteExperience(index) {
            if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ –º–µ—Å—Ç–æ —Ä–∞–±–æ—Ç—ã?')) {
                resumeData.experience.splice(index, 1);
                await saveData();
                renderPage();
            }
        }

        async function saveSkills() {
            resumeData.skills = document.getElementById('inputSkills').value.split('\n').filter(s => s.trim());
            await saveData();
            renderPage();
            closeModal('skillsModal');
        }

        // Render
        function renderPage() {
            document.getElementById('fullName').textContent = resumeData.fullName;
            document.getElementById('position').textContent = resumeData.position;
            document.getElementById('phone').textContent = resumeData.phone;
            document.getElementById('phoneLink').href = 'tel:' + resumeData.phone.replace(/\D/g, '');
            document.getElementById('email').textContent = resumeData.email;
            document.getElementById('emailLink').href = 'mailto:' + resumeData.email;
            document.getElementById('city').textContent = resumeData.city;
            document.getElementById('telegram').textContent = resumeData.telegram;
            document.getElementById('telegramLink').href = 'https://t.me/' + resumeData.telegram.replace('@', '');
            document.getElementById('aboutText').textContent = resumeData.about;
            document.getElementById('goalText').textContent = resumeData.goal;

            // Photo
            const photo = document.getElementById('profilePhoto');
            const placeholder = document.getElementById('profilePlaceholder');
            if (resumeData.photoUrl) {
                photo.src = resumeData.photoUrl;
                photo.classList.remove('hidden');
                placeholder.classList.add('hidden');
            } else {
                photo.classList.add('hidden');
                placeholder.classList.remove('hidden');
            }

            // Experience
            const expList = document.getElementById('experienceList');
            expList.innerHTML = resumeData.experience.map((exp, i) => `
                <div class="relative bg-gray-900 bg-opacity-50 rounded-2xl p-6 border border-gray-700 card-hover">
                    <div class="flex items-start justify-between flex-wrap gap-2">
                        <div>
                            <h3 class="text-xl font-semibold text-white">${exp.position}</h3>
                            <p class="text-teal-400 mt-1">${exp.company}</p>
                        </div>
                        <span class="text-gray-400 text-sm">${exp.period}</span>
                    </div>
                    <ul class="mt-4 space-y-2 text-gray-300">
                        ${exp.duties.map(d => `<li class="flex items-start gap-2"><span class="text-purple-400">‚Ä¢</span>${d}</li>`).join('')}
                    </ul>
                    <button onclick="deleteExperience(${i})" class="delete-exp-btn hidden absolute top-4 right-4 text-red-400 hover:text-red-300">üóëÔ∏è</button>
                </div>
            `).join('');

            // Skills
            document.getElementById('skillsList').innerHTML = resumeData.skills.map(s => 
                `<span class="px-4 py-2 bg-gradient-to-r from-gray-800 to-gray-700 rounded-full border border-gray-600 hover:border-purple-500 transition-all">${s}</span>`
            ).join('');

            // Languages
            document.getElementById('languagesList').innerHTML = resumeData.languages.map(l => `
                <div class="bg-gray-800 bg-opacity-50 rounded-xl p-4 border border-gray-700">
                    <div class="flex justify-between mb-2">
                        <span class="font-semibold">${l.name}</span>
                        <span class="text-gray-400">${l.level}</span>
                    </div>
                    <div class="h-2 bg-gray-700 rounded-full overflow-hidden">
                        <div class="h-full bg-gradient-to-r from-purple-500 to-teal-500 rounded-full" style="width: ${l.percent}%"></div>
                    </div>
                </div>
            `).join('');

            toggleEditButtons(isAdmin);
        }

        // Load data
        async function loadData() {
            const doc = await db.collection('resume').doc('main').get();
            if (doc.exists) {
                resumeData = doc.data();
            } else {
                resumeData = defaultData;
                await db.collection('resume').doc('main').set(defaultData);
            }
            renderPage();
        }

        loadData();
    </script>
</body>
</html>
